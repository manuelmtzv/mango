{{ define "mobile_menu" }}
<div x-show="mobileMenuOpen" x-cloak @click="mobileMenuOpen = false"
  class="fixed inset-0 bg-black/50 z-100 md:hidden"
  x-transition:enter="transition-opacity ease-out duration-300"
  x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
  x-transition:leave="transition-opacity ease-in duration-200"
  x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0">
</div>

<nav x-show="mobileMenuOpen" x-cloak @click.away="mobileMenuOpen = false"
  class="fixed top-0 right-0 h-full w-72 bg-dark-800 shadow-2xl z-101 md:hidden flex flex-col"
  x-transition:enter="transition-transform ease-out duration-300"
  x-transition:enter-start="translate-x-full" x-transition:enter-end="translate-x-0"
  x-transition:leave="transition-transform ease-in duration-200"
  x-transition:leave-start="translate-x-0" x-transition:leave-end="translate-x-full">
  <div class="flex items-center justify-between p-4 border-b border-border">
    <h2 class="text-xl font-serif font-bold text-white">{{t "nav.menu"}}</h2>
    <button @click="mobileMenuOpen = false" class="text-white p-2 hover:text-primary transition-colors"
      aria-label="Close menu">
      <i data-lucide="x" class="w-6 h-6"></i>
    </button>
  </div>

  <div class="flex flex-col gap-2 p-4 flex-1">
    <a href="{{.BaseURL}}/{{.Lang}}" class="flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-dark-700 transition-colors text-white">
      <i data-lucide="home" class="w-5 h-5"></i>
      <span class="text-lg">{{t "nav.home"}}</span>
    </a>
    {{ if .IsAuthenticated }}
    <a href="{{.BaseURL}}/{{.Lang}}/dashboard" class="flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-dark-700 transition-colors text-white">
      <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
      <span class="text-lg">{{t "nav.dashboard"}}</span>
    </a>
    <button
      hx-post="{{.BaseURL}}/{{.Lang}}/auth/logout"
      hx-swap="none"
      hx-on::after-request="window.location.href='{{.BaseURL}}/{{.Lang}}'"
      class="flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-dark-700 transition-colors text-white w-full text-left">
      <i data-lucide="log-out" class="w-5 h-5"></i>
      <span class="text-lg">{{t "nav.logout"}}</span>
    </button>
    {{ else }}
    <a href="{{.BaseURL}}/{{.Lang}}/login" class="flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-dark-700 transition-colors text-white">
      <i data-lucide="log-in" class="w-5 h-5"></i>
      <span class="text-lg">{{t "nav.login"}}</span>
    </a>
    <a href="{{.BaseURL}}/{{.Lang}}/register" class="flex items-center gap-3 px-4 py-3 rounded-lg bg-primary text-dark-900 hover:bg-primary/90 transition-colors font-medium">
      <i data-lucide="user-plus" class="w-5 h-5"></i>
      <span class="text-lg">{{t "nav.register"}}</span>
    </a>
    {{ end }}
  </div>
</nav>
{{ end }}
