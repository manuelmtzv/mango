{{ define "mobile_menu" }}
<div
  x-show="mobileMenuOpen"
  x-cloak
  class="fixed inset-0 z-100 md:hidden"
>
  <div
    x-show="mobileMenuOpen"
    x-transition:enter="transition-opacity duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition-opacity duration-200"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    class="absolute inset-0 bg-black/60 backdrop-blur-sm"
    @click="mobileMenuOpen = false"
  ></div>

  <div
    x-show="mobileMenuOpen"
    x-transition:enter="transition-transform duration-300 ease-out"
    x-transition:enter-start="translate-x-full"
    x-transition:enter-end="translate-x-0"
    x-transition:leave="transition-transform duration-200 ease-in"
    x-transition:leave-start="translate-x-0"
    x-transition:leave-end="translate-x-full"
    class="absolute top-0 right-0 h-full w-72 bg-dark-900 border-l border-border shadow-2xl"
  >
    <div class="flex items-center justify-between p-4 border-b border-border">
      <span class="font-serif text-xl font-bold">{{t "nav.menu"}}</span>
      <button
        @click="mobileMenuOpen = false"
        class="p-2 text-gray-300 hover:text-white transition-colors"
        aria-label="Close menu"
      >
        <i data-lucide="x" class="w-5 h-5"></i>
      </button>
    </div>

    <nav class="p-4">
      <ul class="space-y-2">
        <li>
          <a
            href="{{.BaseURL}}/{{.Lang}}"
            class="flex items-center gap-3 px-4 py-3 rounded-lg text-gray-300 hover:text-white hover:bg-dark-800 transition-colors"
          >
            <i data-lucide="home" class="w-5 h-5"></i>
            {{t "nav.home"}}
          </a>
        </li>
        {{ if .IsAuthenticated }}
        <li>
          <a
            href="{{.BaseURL}}/{{.Lang}}/dashboard"
            class="flex items-center gap-3 px-4 py-3 rounded-lg text-gray-300 hover:text-white hover:bg-dark-800 transition-colors"
          >
            <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
            {{t "nav.dashboard"}}
          </a>
        </li>
        <li>
          <button
            hx-post="{{.BaseURL}}/{{.Lang}}/auth/logout"
            hx-swap="none"
            hx-on::after-request="window.location.href='{{.BaseURL}}/{{.Lang}}'"
            class="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-300 hover:text-white hover:bg-dark-800 transition-colors"
          >
            <i data-lucide="log-out" class="w-5 h-5"></i>
            {{t "nav.logout"}}
          </button>
        </li>
        {{ else }}
        <li>
          <a
            href="{{.BaseURL}}/{{.Lang}}/login"
            class="flex items-center gap-3 px-4 py-3 rounded-lg text-gray-300 hover:text-white hover:bg-dark-800 transition-colors"
          >
            <i data-lucide="log-in" class="w-5 h-5"></i>
            {{t "nav.login"}}
          </a>
        </li>
        <li>
          <a
            href="{{.BaseURL}}/{{.Lang}}/register"
            class="flex items-center gap-3 px-4 py-3 rounded-lg bg-primary text-white hover:bg-primary/90 transition-colors"
          >
            <i data-lucide="user-plus" class="w-5 h-5"></i>
            {{t "nav.register"}}
          </a>
        </li>
        {{ end }}
      </ul>
    </nav>
  </div>
</div>
{{ end }}
